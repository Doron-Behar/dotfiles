# `task context` wrapper with support for env variable TCS silencing it.
_task_context(){
	if [[ -z $TCS ]]; then
		task context "$@"
	elif [[ $TCS == 1 ]]; then
		task context "$@" > /dev/null
		echo context "$@" > /dev/null
	else
		task context "$@" &> /dev/null
		echo context "$@" &> /dev/null
	fi
}

function chpwd() {
	CONTEXT="$(chpwd.awk ~/.local/share/tasks/contexts.txt)"
	if [[ -z ${CONTEXT} ]]; then
		if [[ "${_HACKING_FROM_HOME}" == "true" ]]; then
			_task_context home
		else
			_task_context default
		fi
	else
		_task_context ${CONTEXT}
	fi
}
chpwd

