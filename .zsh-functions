#!/bin/zsh

# {{{1 `fpath` list of paths for directories containing functions for zsh completion
fpath(){
	echo "$fpath" | sed -e 's/\ /\n/g'
}

# {{{1 `zrc` reload zsh completion for a given command
zrc(){
	if [[ ! -z "$1" ]]; then
		unfunction "_$1"
		autoload "_$1" && return 0
	else
		echo please use this command with an argument > /dev/stderr
		return 1
	fi
}

# {{{1 `histrun` run a command from history
histrun(){
	local awk_history_append_cmd='{
			"date +%s" | getline secs
			close("date +%s")
			$1=""
			print ": "secs":0;"$0
		}'
	local awk_prepare_command_cmd='{
			$1=""
			$2=""
			print $0
		}'
	history 1 | fzf | awk "$awk_history_append_cmd" | tee -a "$HISTFILE" | awk "$awk_prepare_command_cmd" | zsh
}
